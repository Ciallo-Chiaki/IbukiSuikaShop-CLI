{"version":3,"file":"shop-sku.js","sources":["components/shop-sku/shop-sku.vue","../../EdgeDownload/HBuilderX/plugins/uniapp-cli-vite/uniComponent:/RDovZXh0ZXN0L0lidWtpU3Vpa2FTaG9wLUNMSS9jb21wb25lbnRzL3Nob3Atc2t1L3Nob3Atc2t1LnZ1ZQ"],"sourcesContent":["<script setup>\nimport { ref, unref, computed } from \"vue\";\nimport { useCartStore } from \"@/stores/cart.js\";\nconst cartStore = useCartStore();\nconsole.log(cartStore.cartList);\n\nconst props = defineProps({\n  info: {\n    type: Object,\n    default: () => ({}),\n  },\n  skuId: {\n    type: String,\n    default: \"\",\n  },\n});\n\nconsole.log(props.skuId);\nconst emits = defineEmits([\"update:skuId\", \"close\"]);\nconst skuList = computed(() => {\n  return props.info.sku || [];\n});\nconsole.log(\"skuList:\", skuList.value);\nconst skuInfo = computed(() => {\n  return skuList.value.find((item) => item._id == props.skuId) || {};\n});\nconst countNum = ref(1);\n\nconst handleSkuChange = (e) => {\n  console.log(\"Selected SKU:\", e);\n  emits(\"update:skuId\", e._id);\n};\n\n// 采集数据函数\nconst createInfo = () => {\n  if (!unref(skuInfo)._id) {\n    throw new Error(\"缺少规格参数\");\n  }\n  return {\n    ...props.info,\n    _skuInfo: unref(skuInfo),\n    _countNum: unref(countNum),\n  };\n};\n\nconst handleCart = () => {\n  const shopInfo = createInfo();\n  cartStore.pushGoods(shopInfo);\n  emits(\"close\");\n};\nconst handleBuy = () => {\n  emits(\"close\");\n};\n</script>\n\n<template>\n  <view class=\"shop-sku\">\n    <view class=\"info-wrap\">\n      <card-goods-info\n        :info=\"props.info\"\n        :type=\"3\"\n        :sku=\"skuInfo\"\n      ></card-goods-info>\n    </view>\n\n    <view class=\"sku-list-wrap\">\n      <view class=\"label\">规格</view>\n      <view class=\"sku-list\">\n        <view\n          class=\"sku-item\"\n          @click=\"handleSkuChange(item)\"\n          :class=\"{ active: item._id === skuId }\"\n          v-for=\"item in skuList\"\n          :key=\"item._id\"\n          >{{ item.name }}</view\n        >\n      </view>\n    </view>\n\n    <view class=\"set-count-wrap\">\n      <view class=\"label\">数量</view>\n      <view class=\"count\">\n        <uv-number-box v-model=\"countNum\" :min=\"1\" :max=\"10\"></uv-number-box>\n      </view>\n    </view>\n\n    <view class=\"btn-wrap\">\n      <view class=\"btn car-btn\" @click=\"handleCart\">加入购物车</view>\n      <view class=\"btn buy-btn\" @click=\"handleBuy\">立即购买</view>\n    </view>\n  </view>\n</template>\n\n<style lang=\"scss\" scoped>\n.shop-sku {\n  padding-bottom: 32rpx;\n  .info-wrap {\n    margin-bottom: 32rpx;\n  }\n  .sku-list-wrap {\n    padding: 32rpx 0 0;\n    .label {\n      font-size: 32rpx;\n      color: #333;\n      font-weight: bold;\n    }\n    .sku-list {\n      display: flex;\n      flex-wrap: wrap;\n      align-items: center;\n      padding: 32rpx 0;\n      gap: 20rpx;\n      .sku-item {\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        padding: 5rpx 20rpx;\n        color: #666;\n        font-size: 32rpx;\n        background-color: #f4f4f4;\n        border-radius: 4rpx;\n        border: 1px solid #eee;\n\n        &.active {\n          color: #fff;\n          border: 1px solid #fff;\n          background-color: $uni-color-primary;\n        }\n      }\n    }\n  }\n  .set-count-wrap {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    margin-bottom: 80px;\n    .label {\n      font-size: 32rpx;\n      color: #333;\n      font-weight: bold;\n    }\n    .count {\n      // 步进器\n    }\n  }\n  .btn-wrap {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    .btn {\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      flex: 1;\n      height: 80rpx;\n      font-size: 28rpx;\n      color: #fff;\n    }\n  }\n  .car-btn {\n    background-color: #ff9800;\n    border-radius: 80rpx 0 0 80rpx;\n  }\n  .buy-btn {\n    background-color: $uni-color-error;\n    border-radius: 0 80rpx 80rpx 0;\n  }\n}\n</style>\n","import Component from 'D:/extest/IbukiSuikaShop-CLI/components/shop-sku/shop-sku.vue'\nwx.createComponent(Component)"],"names":["useCartStore","uni","computed","ref","unref"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AAGA,UAAM,YAAYA,YAAY,aAAA;AAC9BC,kBAAA,MAAA,MAAA,OAAA,yCAAY,UAAU,QAAQ;AAE9B,UAAM,QAAQ;AAWdA,kBAAA,MAAA,MAAA,OAAA,0CAAY,MAAM,KAAK;AACvB,UAAM,QAAQ;AACd,UAAM,UAAUC,cAAQ,SAAC,MAAM;AAC7B,aAAO,MAAM,KAAK,OAAO;IAC3B,CAAC;AACDD,kBAAAA,MAAY,MAAA,OAAA,0CAAA,YAAY,QAAQ,KAAK;AACrC,UAAM,UAAUC,cAAQ,SAAC,MAAM;AAC7B,aAAO,QAAQ,MAAM,KAAK,CAAC,SAAS,KAAK,OAAO,MAAM,KAAK,KAAK;IAClE,CAAC;AACD,UAAM,WAAWC,cAAAA,IAAI,CAAC;AAEtB,UAAM,kBAAkB,CAAC,MAAM;AAC7BF,iFAAY,iBAAiB,CAAC;AAC9B,YAAM,gBAAgB,EAAE,GAAG;AAAA,IAC7B;AAGA,UAAM,aAAa,MAAM;AACvB,UAAI,CAACG,cAAK,MAAC,OAAO,EAAE,KAAK;AACvB,cAAM,IAAI,MAAM,QAAQ;AAAA,MACzB;AACD,aAAO;AAAA,QACL,GAAG,MAAM;AAAA,QACT,UAAUA,cAAK,MAAC,OAAO;AAAA,QACvB,WAAWA,cAAK,MAAC,QAAQ;AAAA,MAC7B;AAAA,IACA;AAEA,UAAM,aAAa,MAAM;AACvB,YAAM,WAAW;AACjB,gBAAU,UAAU,QAAQ;AAC5B,YAAM,OAAO;AAAA,IACf;AACA,UAAM,YAAY,MAAM;AACtB,YAAM,OAAO;AAAA,IACf;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACnDA,GAAG,gBAAgB,SAAS;"}